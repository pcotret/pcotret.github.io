[{"categories":["tech-misc"],"content":"As most of us, we‚Äôre working from home for some time. Here is a quick start guide for the IPEVO V4K document camera. ","date":"2020-11-02","objectID":"/document-camera/:0:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Installation ","date":"2020-11-02","objectID":"/document-camera/:1:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Hardware The camera itself is a plug-and-play device: it‚Äôs recognized as a camera. Two buttons on it to enable/disable the autofocus and adjust the exposure. ","date":"2020-11-02","objectID":"/document-camera/:1:1","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Software Go to https://www.ipevo.com/software/visualizer#download As you can see, the IPEVO visualizer is supported by several platforms: In the following parts, we‚Äôll try to work with the Linux binary and the Chrome plugin ","date":"2020-11-02","objectID":"/document-camera/:1:2","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Working with the Chrome plugin Maybe the easiest solution: there‚Äôs a plugin for Google Chrome at https://chrome.google.com/webstore/detail/ipevo-visualizer/knibbpmgfkaginjkddpmmpcnknegecok You can explore the toolbar on the left side to get options on the resolution, camera rotation and so on. You can even draw with basics color on it. ","date":"2020-11-02","objectID":"/document-camera/:2:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Working with the Linux binary There‚Äôs a DEB package for Debian-based distros. It‚Äôs a bit ‚Äúugly‚Äù as it copies a JAR file in /usr/bin/. In other words, to run the Linux binary: java -jar /usr/bin/visualizer-1.1.3.37.jar The interface is similar to the Google Chrome plugin. Some additional options for contrast, while balance, etc. ","date":"2020-11-02","objectID":"/document-camera/:3:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Including the camera stream in a Microsoft Teams meeting https://s3-us-west-1.amazonaws.com/files.ipevo.com/download/doc/step_by_step_guide-microsoft_teams.pdf By default, the camera stream is horizontally flipped. Even if there‚Äôs an official guide from Ipevo, the only solution is to share the camera software as there‚Äôs no option to flip the camera in Microsoft Teams‚Ä¶ ","date":"2020-11-02","objectID":"/document-camera/:4:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"Including the camera stream in a Discord meeting Solution is similar to Microsoft Teams. However, Discord is a less buggy software on Linux for group meetings compared to Microsoft Teams. With OBS studio, we can easily get a cool setup with slides, document camera and even the presenter face if needed üòä Lockdown setup with the document camera on the right side over a book and a cutting mat: ","date":"2020-11-02","objectID":"/document-camera/:5:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-misc"],"content":"References IPEVO guides IPEVO V4K product page ","date":"2020-11-02","objectID":"/document-camera/:6:0","tags":["lockdown"],"title":"Lockdown setup - Working with an IPEVO document camera","uri":"/document-camera/"},{"categories":["tech-networks"],"content":"Basic Configuration Commands Command Purpose enable Logs you into enable mode, which is also known as user exec mode or privileged mode configure terminal Logs you into configuration mode interface fastethernet/number Enters interface configuration mode for the specified fast ethernet interface reload An exec mode command that reboots a Cisco switch or router hostname name Sets a host name to the current Cisco network device copy from-location to-location An enable mode command that copies files from one file location to another copy running-config startup-config An enable mode command that saves the active config, replacing the startup config when a Cisco network device initializes copy startup-config running-config An enable mode command that merges the startup config with the currently active config in RAM write erase****erase startup-config An enable mode command that deletes the startup config ip address ip-address mask Assigns an IP address and a subnet mask shutdown****no shutdown Used in interface configuration mode. ‚ÄúShutdown‚Äù shuts down the interface, while ‚Äúno shutdown‚Äù brings up the interface. ip default-gateway ip_address Sets the default gateway on a Cisco device show running-config An enable mode command that displays the current configuration description name-string A config interface command to describe or name an interface show running-config interface interface slot/number An enable mode command to display the running configuration for a specific interface show ip interface [type number] Displays the usability status of interfaces that are configured for IP ip name-server serverip-1 serverip-2 A configure mode command that sets the IP addresses of DNS servers ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:1:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"Troubleshooting Commands Command Purpose ping {hostname | system-address} [source source-address] Used in enable mode to diagnose basic network connectivity speed {10 | 100 | 1000 | auto} An interface mode command that manually sets the speed to the specified value or negotiates it automatically duplex {auto | full | half} An interface mode command that manually sets duplex to half, full or auto cdp run****no cdp run A configuration mode command that enables or disables Cisco Discovery Protocol (CDP) for the device show mac address-table Displays the MAC address table show cdp Shows whether CDP is enabled globally show cdp neighbors*[detail]* Lists summary information about each neighbor connected to this device; the ‚Äúdetail‚Äù option lists detailed information about each neighbor show interfaces Displays detailed information about interface status, settings and counters show interface status Displays the interface line status show interfaces switchport Displays a large variety of configuration settings and current operational status, including VLAN trunking details. show interfaces trunk Lists information about the currently operational trunks and the VLANs supported by those trunks show vlan****show vlan brief Lists each VLAN and all interfaces assigned to that VLAN but does not include trunks show vtp status Lists the current VTP status, including the current mode ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:2:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"Routing and VLAN Commands Command Purpose ip routenetwork-number network-mask {ip-address | interface} Sets a static route in the IP routing table router rip Enables a Routing Information Protocol (RIP) routing process, which places you in router configuration mode network ip-address In router configuration mode, associates a network with a RIP routing process version 2 In router configuration mode, configures the software to receive and send only RIP version 2 packets no auto-summary In router configuration mode, disables automatic summarization default-information originate In router configuration mode, generates a default route into RIP passive-interface interface In router configuration mode, sets only that interface to passive RIP mode. In passive RIP mode, RIP routing updates are accepted by, but not sent out of, the specified interface. show ip rip database Displays the contents of the RIP routing database ip nat [inside | outside] An interface configuration mode command to designate that traffic originating from or destined for the interface is subject to NAT ip nat inside source {list{access-list-number | access-list-name}} interface type number[overload] A configuration mode command to establish dynamic source translation. Use of the ‚Äúlist‚Äù keyword enables you to use an ACL to identify the traffic that will be subject to NAT. The ‚Äúoverload‚Äù option enables the router to use one global address for many local addresses. ip nat inside source static local-ip global-ip A configuration mode command to establish a static translation between an inside local address and an inside global address vlan Creates a VLAN and enters VLAN configuration mode for further definitions switchport access vlan Sets the VLAN that the interface belongs to. switchport trunk encapsulation dot1q Specifies 802.1Q encapsulation on the trunk link. switchport access Assigns this port to a VLAN vlan vlan-id [name vlan-name] Configures a specific VLAN name (1 to 32 characters) switchport mode { access | trunk } Configures the VLAN membership mode of a port. The access port is set to access unconditionally and operates as a non-trunking, single VLAN interface that sends and receives non-encapsulated (non-tagged) frames. An access port can be assigned to only one VLAN. The trunk port sends and receives encapsulated (tagged) frames that identify the VLAN of origination. A trunk is a point-to-point link between two switches or between a switch and a router. switchport trunk {encapsulation { dot1q } Sets the trunk characteristics when the interface is in trunking mode. In this mode, the switch supports simultaneous tagged and untagged traffic on a port. encapsulation dot1q vlan-id A configuration mode command that defines the matching criteria to map 802.1Q frames ingress on an interface to the appropriate service instance ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:3:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"DHCP Commands Command Purpose ip address dhcp A configuration mode command to acquire an IP address on an interface via DHCP ip dhcp pool name A configuration mode command to configure a DHCP address pool on a DHCP server and enter DHCP pool configuration mode domain-name domain Used in DHCP pool configuration mode to specify the domain name for a DHCP client network network-number [mask] Used in DHCP pool configuration mode to configure the network number and mask for a DHCP address pool primary or secondary subnet on a Cisco IOS DHCP server ip dhcp excluded-address ip-address [last-ip-address] A configuration mode command to specify IP addresses that a DHCP server should not assign to DHCP clients ip helper-address address An interface configuration mode command to enable forwarding of UDP broadcasts, including BOOTP, received on an interface default-router address[address2 ‚Ä¶ address8] Used in DHCP pool configuration mode to specify the default router list for a DHCP client ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:4:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"Security Commands Command Purpose passwordpass-value Lists the password that is required if the login command (with no other parameters) is conÔ¨Ågured username name password pass-value A global command that deÔ¨Ånes one of possibly multiple user names and associated passwords used for user authentication. It is used when the login local line conÔ¨Åguration command has been used. enable password pass-value A configuration mode command that deÔ¨Ånes the password required when using the enable command enable secretpass-value A configuration mode command that sets this Cisco device password that is required for any user to enter enable mode service password-encryption A configuration mode command that directs the Cisco IOS software to encrypt the passwords, CHAP secrets, and similar data saved in its configuration file ip domain-name name ConÔ¨Ågures a DNS domain name crypto key generate rsa A configuration mode command that creates and stores (in a hidden location in Ô¨Çash memory) the keys that are required by SSH transport input {telnet | ssh} Used in vty line conÔ¨Åguration mode, deÔ¨Ånes whether Telnet or SSH access is allowed into this switch. Both values can be specified in a single command to allow both Telnet and SSH access (default settings). access-list access-list-number {deny | permit} source [source-wildcard] [log] A configuration mode command that defines a standard IP access list access-class Restricts incoming and outgoing connections between a particular vty (into a basic Cisco device) and the addresses in an access list ip access-list {standard | extended} {access-list-name | access-list-number} A configuration mode command that defines an IP access list by name or number permit source [source-wildcard] Used in ACL configuration mode to set conditions to allow a packet to pass a named IP ACL. To remove a permit condition from an ACL, use the ‚Äúno‚Äù form of this command. deny source [source-wildcard] Used in ACL configuration mode to set conditions in a named IP ACL that will deny packets. To remove a deny condition from an ACL, use the ‚Äúno‚Äù form of this command. ntp peer Used in global configuration mode to configure the software clock to synchronize a peer or to be synchronized by a peer switchport port-security Used in interface configuration mode to enable port security on the interface switchport port-security maximum maximum Used in interface configuration mode to set the maximum number of secure MAC addresses on the port switchport port-security mac-address {mac-addr | {sticky [mac-addr]}} Used in interface configuration mode to add a MAC address to the list of secure MAC addresses. The ‚Äústicky‚Äù option configures the MAC addresses as sticky on the interface. switchport port-security violation {shutdown | restrict | protect} Used in interface configuration mode to set the action to be taken when a security violation is detected show port security [interface interface-id] Displays information about security options configured on the interface ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:5:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"Monitoring and Logging Commands Command Purpose logging ip address Configures the IP address of the host that will receive the system logging (syslog) messages logging trap level Used in configuration mode to limit messages that are logged to the syslog servers based on severity. Specify the number or name of the desired severity level at which messages should be logged. show logging Enable mode command that displays the state of system logging (syslog) and the contents of the standard system logging buffer. terminal monitor An enable mode command that tells Cisco IOS to send a copy of all syslog messages, including debug messages, to the Telnet or SSH user who issues this command ","date":"2020-10-06","objectID":"/cisco_cheatsheet/:6:0","tags":["cisco","networks"],"title":"Cisco cheatsheet","uri":"/cisco_cheatsheet/"},{"categories":["tech-networks"],"content":"Prerequisites for Ubuntu 20 sudo apt install libgcrypt20-dev libglib2.0-dev libc-ares-dev libssh-dev libpcap-dev \\ libsystemd-dev qtbase5-dev qttools5-dev qtmultimedia5-dev ","date":"2020-09-20","objectID":"/wireshark_build/:1:0","tags":["wireshark","networks"],"title":"Building Wireshark from source","uri":"/wireshark_build/"},{"categories":["tech-networks"],"content":"Download and build git clone https://gitlab.com/wireshark/wireshark cd wireshark mkdir build cd build cmake .. make sudo make install ","date":"2020-09-20","objectID":"/wireshark_build/:2:0","tags":["wireshark","networks"],"title":"Building Wireshark from source","uri":"/wireshark_build/"},{"categories":["tech-embedded"],"content":"Activate Coresight components - Software side - Method #1 ","date":"2020-06-29","objectID":"/coresight-zedboard/:1:0","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["tech-embedded"],"content":"Generate a core-image-minimal Just follow https://pcotret.github.io/yocto-zedboard-101/. When booting this image: Poky (Yocto Project Reference Distro) 3.0.3 zedboard-zynq7 /dev/ttyPS0 zedboard-zynq7 login: root root@zedboard-zynq7:~# ls /sys/bus/ amba container event_source i2c media nvmem scsi soc usb clockevents cpu gpio iio mmc pci sdio spi virtio clocksource edac hid mdio_bus mmc_rpmb platform serio ulpi workqueue No Coresight components üò¢ ‚Äã ","date":"2020-06-29","objectID":"/coresight-zedboard/:1:1","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["tech-embedded"],"content":"Customize a linux-xlnx-dev kernel uImage The idea is to create a custom kernel where the support of Coresight components is enabled. Unfortunately, we cannot customize the usual core-image-minimal image with Yocto tools. Fortunately, we can do it on a linux-xlnx-dev image! bitbake linux-xlnx-dev -c menuconfig Go to Kernel hacking =\u003e CoreSight Tracing Support and enable the components you need (everything is enabled here). Then, save and exit. bitbake linux-xlnx-dev -c compile -f bitbake linux-xlnx-dev -c deploy Now, you should have a new uImage file in build/tmp/deploy/images/zedboard-zynq7. Just replace it in the first partititon of the SD card and boot the board. Poky (Yocto Project Reference Distro) 3.0.3 zedboard-zynq7 /dev/ttyPS0 zedboard-zynq7 login: root root@zedboard-zynq7:/sys/bus/coresight# ll drwxr-xr-x 2 root root 0 Jan 1 1970 devices drwxr-xr-x 2 root root 0 Jun 29 21:56 drivers -rw-r--r-- 1 root root 4.0K Jun 29 21:56 drivers_autoprobe --w------- 1 root root 4.0K Jun 29 21:56 drivers_probe --w------- 1 root root 4.0K Jun 29 21:56 uevent root@zedboard-zynq7:/sys/bus/coresight# ll devices/ We can see some Coresight support in the kernel but no devices detected‚Ä¶ And, well, there are several reasons for that üò® ","date":"2020-06-29","objectID":"/coresight-zedboard/:1:2","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["tech-embedded"],"content":"Activate Coresight components - Hardware side ","date":"2020-06-29","objectID":"/coresight-zedboard/:2:0","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["tech-embedded"],"content":"Yocto meta-xilinx layer and Xilinx Linux kernel During the compilation process, the meta-xilinx was cloned (zeus branch). https://github.com/Xilinx/meta-xilinx/tree/zeus/meta-xilinx-bsp/conf/machine/zedboard-zynq7.conf: require conf/machine/include/machine-xilinx-default.inc # Skipping a few lines KERNEL_DEVICETREE = \"zynq-zed.dtb\" https://github.com/Xilinx/meta-xilinx/tree/zeus/meta-xilinx-bsp/conf/machine/include/machine-xilinx-default.inc: # Kernel Configuration XILINX_DEFAULT_KERNEL := \"linux-xlnx\" XILINX_DEFAULT_KERNEL_microblaze := \"linux-yocto\" XILINX_DEFAULT_KERNEL_zynqmp := \"linux-yocto\" PREFERRED_PROVIDER_virtual/kernel ??= \"${XILINX_DEFAULT_KERNEL}\" According to the BitBake files, it will clone the xlnx_rebase_v4.19 branch of the Linux kernel provided by Xilinx (https://github.com/Xilinx/linux-xlnx/tree/xlnx_rebase_v4.19). https://github.com/Xilinx/meta-xilinx/tree/zeus/meta-xilinx-bsp/recipes-kernel/linux/linux-xlnx_2019.2.bb: LINUX_VERSION = \"4.19\" KBRANCH ?= \"xlnx_rebase_v4.19\" Then, if we look at the device tree file common to all Zynq 7000-based boards (https://github.com/Xilinx/linux-xlnx/blob/xlnx_rebase_v4.19/arch/arm/boot/dts/zynq-7000.dtsi): No mention of Coresight components at all üò® Which in not the case in the master branch (https://github.com/Xilinx/linux-xlnx/blob/master/arch/arm/boot/dts/zynq-7000.dtsi): # [...] etb@f8801000 { compatible = \"arm,coresight-etb10\", \"arm,primecell\"; reg = \u003c0xf8801000 0x1000\u003e; clocks = \u003c\u0026clkc 27\u003e, \u003c\u0026clkc 46\u003e, \u003c\u0026clkc 47\u003e; clock-names = \"apb_pclk\", \"dbg_trc\", \"dbg_apb\"; in-ports { port { etb_in_port: endpoint { remote-endpoint = \u003c\u0026replicator_out_port1\u003e; }; }; }; }; tpiu@f8803000 { compatible = \"arm,coresight-tpiu\", \"arm,primecell\"; reg = \u003c0xf8803000 0x1000\u003e; clocks = \u003c\u0026clkc 27\u003e, \u003c\u0026clkc 46\u003e, \u003c\u0026clkc 47\u003e; clock-names = \"apb_pclk\", \"dbg_trc\", \"dbg_apb\"; in-ports { port { tpiu_in_port: endpoint { remote-endpoint = \u003c\u0026replicator_out_port0\u003e; }; }; }; }; funnel@f8804000 { compatible = \"arm,coresight-static-funnel\", \"arm,primecell\"; reg = \u003c0xf8804000 0x1000\u003e; clocks = \u003c\u0026clkc 27\u003e, \u003c\u0026clkc 46\u003e, \u003c\u0026clkc 47\u003e; clock-names = \"apb_pclk\", \"dbg_trc\", \"dbg_apb\"; /* funnel output ports */ out-ports { port { funnel_out_port: endpoint { remote-endpoint = \u003c\u0026replicator_in_port0\u003e; }; }; }; # [...] This is mainly due to the fact that the kernel version in the meta-xilinx layer has been updated later in the master branch: commit 48998ea5b79af13fb1b181037cd3a12990463e8a Author: Sai Hari Chandana Kalluri \u003cchandana.kalluri@xilinx.com\u003e Date: Fri Feb 21 11:20:37 2020 -0800 Update KERNEL_VERSION to 5.4 Update KERNEL_VERSION to 5.4 Signed-off-by: Sai Hari Chandana Kalluri \u003cchandana.kalluri@xilinx.com\u003e diff --git a/meta-xilinx-bsp/recipes-kernel/linux/linux-xlnx_2020.1.bb b/meta-xilinx-bsp/recipes-kernel/linux/linux-xlnx_2020.1.bb index 58f163c..2b8763a 100644 --- a/meta-xilinx-bsp/recipes-kernel/linux/linux-xlnx_2020.1.bb +++ b/meta-xilinx-bsp/recipes-kernel/linux/linux-xlnx_2020.1.bb @@ -1,4 +1,4 @@ -LINUX_VERSION = \"4.19\" +LINUX_VERSION = \"5.4\" KBRANCH ?= \"xlnx_rebase_v4.19\" SRCREV ?= \"b983d5fd71d4feaf494cdbe0593ecc29ed471cb8\" Furthermore, this has been updated only in the 5.6 release of the Linux kernel: https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9b0b308a1586f620a49c50605ae8abf509190661\u0026h=master --- a/arch/arm/boot/dts/zynq-7000.dtsi +++ b/arch/arm/boot/dts/zynq-7000.dtsi @@ -59,6 +59,39 @@ regulator-always-on; }; + replicator { + compatible = \"arm,coresight-static-replicator\"; + clocks = \u003c\u0026clkc 27\u003e, \u003c\u0026clkc 46\u003e, \u003c\u0026clkc 47\u003e; + clock-names = \"apb_pclk\", \"dbg_trc\", \"dbg_apb\"; + + out-ports { + #address-cells = \u003c1\u003e; + #size-cells = \u003c0\u003e; + + /* replicator output ports */ + port@0 { + reg = \u003c0\u003e; + replicator_out_port0: endpoint { + remote-endpoint = \u003c\u0026tpiu_in_port\u003e; + }; + }; + port@1 { + reg = \u003c1\u003e; + replicator_out_port1: endpoint { + remote-endpoint = \u003c\u0026etb_in_port\u003e; + }; + }; + }; + in-ports { + /* replicator input port */ + port { + replicator_in_port0: endpoint { + remote-end","date":"2020-06-29","objectID":"/coresight-zedboard/:2:1","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["tech-embedded"],"content":"Recompiling everything‚Ä¶ Now that we‚Äôve found when and where the device tree has been updated with Coresight components, we have two tasks to do: Recompile a default core-image-minimal with linux-xlnx-dev kernel. Customize linux-xlnx-dev in order to include Coresight drivers. Then, once everything is copied on the SD card: Starting kernel ... Booting Linux on physical CPU 0x0 Linux version 5.4.0-xilinx-dev (oe-user@oe-host) (gcc version 9.2.0 (GCC)) #1 SMP PREEMPT Mon Jul 6 16:40:45 UTC 2020 [...] coresight etm0: PTM 1.0 initialized coresight etm1: PTM 1.0 initialized fpga_manager fpga0: Xilinx Zynq FPGA Manager registered [...] Starting syslogd/klogd: done Poky (Yocto Project Reference Distro) 3.0.3 zedboard-zynq7 /dev/ttyPS0 zedboard-zynq7 login: root root@zedboard-zynq7:~# ls /sys/bus/coresight/devices/ etb0 etm0 etm1 funnel0 replicator0 tpiu0 Yay, we can see Coresight components on the Zedboard! üï∂Ô∏è ","date":"2020-06-29","objectID":"/coresight-zedboard/:2:2","tags":["yocto","zedboard","coresight"],"title":"Activate Coresight components in a Yocto environment for the Zedboard","uri":"/coresight-zedboard/"},{"categories":["articles"],"content":" arduino-cli: Command Line Interface for Arduino ARM cross compiler: sudo apt install gcc-arm-none-eabi ","date":"2020-05-03","objectID":"/arduino_due_reverse/:0:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Sample program We want to create the most simple program which goal is to light on the built-in LED, located at port PB27 on the Arduino Due. ","date":"2020-05-03","objectID":"/arduino_due_reverse/:1:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Arduino void setup() { pinMode(LED_BUILTIN, OUTPUT); } void loop() { digitalWrite(LED_BUILTIN, HIGH); } ","date":"2020-05-03","objectID":"/arduino_due_reverse/:1:1","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Embedded C int main() { PIOB-\u003ePIO_PER = 1\u003c\u003c27; /* Enable port PB27 */ PIOB-\u003ePIO_OER = 1\u003c\u003c27; /* Configure PB27 as output */ PIOB-\u003ePIO_ODSR = 0xFFFFFFFF; /* Write 1 in all PORTB ports */ return 0; } ","date":"2020-05-03","objectID":"/arduino_due_reverse/:1:2","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Codes and compilation $ ls -lR ./led-arduino: total 4 -rw-r--r-- 1 pascal pascal 104 mai 1 12:58 led-arduino.ino ./led-embedded: total 4 -rw-r--r-- 1 pascal pascal 81 mai 1 13:00 led-embedded.ino $ arduino-cli compile --fqbn arduino:sam:arduino_due_x led-arduino $ arduino-cli compile --fqbn arduino:sam:arduino_due_x led-embedded ","date":"2020-05-03","objectID":"/arduino_due_reverse/:1:3","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Binary comparison Arduino Embedded C Storage use 10660 bytes 2544 bytes The embedded C code is 5 times smaller than the Arduino one which is a bit ‚Äúweird‚Äù as both codes do the same thing! Let‚Äôs find why by reversing binaries and analyzing assembly codes. arduino-cli produces the *.elf binary and the *.hex file which is just a series of bytes to be loaded in the Arduino. ","date":"2020-05-03","objectID":"/arduino_due_reverse/:2:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Reversing binaries $ arm-none-eabi-objdump -S led-arduino/led-arduino.arduino.sam.arduino_due_x.elf \u003e led-arduino.asm $ arm-none-eabi-objdump -S led-embedded/led-embedded.arduino.sam.arduino_due_x.elf \u003e led-embedded.asm ","date":"2020-05-03","objectID":"/arduino_due_reverse/:3:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Arduino binary void init( void ) { 80194: e92d 41f0 stmdb sp!, {r4, r5, r6, r7, r8, lr} SystemInit(); // Set Systick to 1ms interval, common to all SAM3 variants if (SysTick_Config(SystemCoreClock / 1000)) 80198: 4d3f ldr r5, [pc, #252] ; (80298 \u003cinit+0x104\u003e) SystemInit(); 8019a: f000 f9f1 bl 80580 \u003cSystemInit\u003e if (SysTick_Config(SystemCoreClock / 1000)) 8019e: 682b ldr r3, [r5, #0] 801a0: f44f 727a mov.w r2, #1000 ; 0x3e8 801a4: fbb3 f3f2 udiv r3, r3, r2 */ static __INLINE uint32_t SysTick_Config(uint32_t ticks) { if (ticks \u003e SysTick_LOAD_RELOAD_Msk) return (1); /* Reload value impossible */ [...] Here is a part of the Arduino objdump. The assembly code is really long for such a program‚Ä¶ It is easy to understand when we look at the source code of pinMode() and digitalWrite() (https://github.com/arduino/ArduinoCore-sam/blob/master/cores/arduino/wiring_digital.c). It does not only write a value into a register‚Ä¶ ","date":"2020-05-03","objectID":"/arduino_due_reverse/:3:1","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Embedded C binary 61 00080148 \u003cmain\u003e: 62 int main() 63 { 64 PIOB-\u003ePIO_PER = 1\u003c\u003c27; 65 80148: 4b04 ldr r3, [pc, #16] ; (8015c \u003cmain+0x14\u003e) 66 8014a: f04f 6200 mov.w r2, #134217728 ; 0x8000000 67 8014e: 601a str r2, [r3, #0] 68 PIOB-\u003ePIO_OER = 1\u003c\u003c27; 69 80150: 611a str r2, [r3, #16] 70 PIOB-\u003ePIO_ODSR = 0xFFFFFFFF; 71 80152: f04f 32ff mov.w r2, #4294967295 ; 0xffffffff 72 80156: 639a str r2, [r3, #56] ; 0x38 73 return 0; 74 } At first sight, it‚Äôs clearly easier. Step-by-step instruction decoding using mainly [2] and [6]: mov.w r2, #134217728. Move the immediate value 134217728 in r2, a general purpose register. 134217728 = 0x8000000 (hex) = 0b1000000000000000000000000000 (bin) which is 1 on the 27th bit ! üòâ str r2, [r3, #0]. Store the value of r2 in r3, another general purpose register, with offset=0. According to the register mapping: PIO_PER is at the offset 0x0000. str r2, [r3, #16]. Store the value of r2 in r3 with offset=16 (or 0x10 in hexadecimal). According to the register mapping: PIO_OER is at the offset 0x0010. mov.w r2, #4294967295. Move the immediate value 4294967295 in register 2. 4294967295 = 0xFFFFFFFF (hex). In this case, we put all bits to 1. It doesn‚Äôt really matter as only the 27th has been enabled üòâ str r2, [r3, #56]. Store the value of r2 in r3 with offset=56 (or 0x38 in hexadecimal). According to the register mapping: PIO_ODSR is at the offset 0x0038. ","date":"2020-05-03","objectID":"/arduino_due_reverse/:3:2","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"Conclusion Embedded C code is usually quicker and smaller as long as we make some effort to study the datasheet. But it‚Äôs worth it when we‚Äôre working with embedded systems! üòâ ","date":"2020-05-03","objectID":"/arduino_due_reverse/:4:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":"References Cortex-M3 Revision r2p0Technical Reference Manual SAM3X datasheet ARMv7-M ArchitectureReference Manual A simplified ISA document Cortex-M3 TRM ARM assembly basics ","date":"2020-05-03","objectID":"/arduino_due_reverse/:5:0","tags":["arduino","embedded"],"title":"Arduino Due vs. embedded C - ARM reversing","uri":"/arduino_due_reverse/"},{"categories":["articles"],"content":" As I was teaching some embedded C basics, I was asked what are some benefits of embedded C over the classic Arduino language for an Arduino-based board. This article tries to see what we can do by reversing a really simple program compiled with both methods for the Arduino Uno. ","date":"2020-05-01","objectID":"/arduino_reverse/:0:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Prerequisites arduino-cli: Command Line Interface for Arduino AVR cross compiler: sudo apt install gcc-avr Optional: an Arduino simulator such as SimulIDE ","date":"2020-05-01","objectID":"/arduino_reverse/:1:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Sample program We want to create the most simple program which goal is to light on the built-in LED, located at port 13 (or PORT PB5) on the Arduino Uno. ","date":"2020-05-01","objectID":"/arduino_reverse/:2:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Arduino void setup() { pinMode(LED_BUILTIN, OUTPUT); } void loop() { digitalWrite(LED_BUILTIN, HIGH); } ","date":"2020-05-01","objectID":"/arduino_reverse/:2:1","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Embedded C #include \u003cavr/io.h\u003eint main() { DDRB = 1 \u003c\u003c PB5; PORTB = 1 \u003c\u003c PB5; return 0; } ","date":"2020-05-01","objectID":"/arduino_reverse/:2:2","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Codes and compilation $ ls -lR ./led-arduino: total 4 -rw-r--r-- 1 pascal pascal 104 mai 1 12:58 led-arduino.ino ./led-embedded: total 4 -rw-r--r-- 1 pascal pascal 81 mai 1 13:00 led-embedded.ino $ arduino-cli compile --fqbn arduino:avr:uno led-arduino $ arduino-cli compile --fqbn arduino:avr:uno led-embedded ","date":"2020-05-01","objectID":"/arduino_reverse/:2:3","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Binary comparison Arduino Embedded C Storage use 724 bytes 144 bytes The embedded C code is 5 times smaller than the Arduino one which is a bit ‚Äúweird‚Äù as both codes do the same thing! Let‚Äôs find why by reversing binaries and analyzing assembly codes. arduino-cli produces the *.elf binary and the *.hex file which is just a series of bytes to be loaded in the Arduino. ","date":"2020-05-01","objectID":"/arduino_reverse/:3:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Reversing binaries $ avr-objdump -S led-arduino/led-arduino.arduino.avr.uno.elf \u003e led-arduino.asm $ avr-objdump -S led-embedded/led-embedded.arduino.avr.uno.elf \u003e led-embedded.asm ","date":"2020-05-01","objectID":"/arduino_reverse/:4:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Arduino binary void init() { // this needs to be called before setup() or some functions won't // work there sei(); 174: 78 94 sei // on the ATmega168, timer 0 is also used for fast hardware pwm // (using phase-correct PWM would mean that timer 0 overflowed half as often // resulting in different millis() behavior on the ATmega8 and ATmega168) #if defined(TCCR0A) \u0026\u0026 defined(WGM01) sbi(TCCR0A, WGM01); 176: 84 b5 in r24, 0x24 ; 36 178: 82 60 ori r24, 0x02 ; 2 17a: 84 bd out 0x24, r24 ; 36 sbi(TCCR0A, WGM00); 17c: 84 b5 in r24, 0x24 ; 36 17e: 81 60 ori r24, 0x01 ; 1 180: 84 bd out 0x24, r24 ; 36 // this combination is for the standard atmega8 [...] Here is a part of the Arduino objdump. The assembly code is really long for such a program‚Ä¶ It is easy to understand when we look at the source code of pinMode() and digitalWrite() (https://github.com/arduino/ArduinoCore-avr/blob/master/cores/arduino/wiring_digital.c). It does not only write a value into a register‚Ä¶ Garretlab made an analysis of both functions: https://garretlab.web.fc2.com/en/arduino/inside/hardware/arduino/avr/cores/arduino/wiring_digital.c/digitalWrite.html https://garretlab.web.fc2.com/en/arduino/inside/hardware/arduino/avr/cores/arduino/wiring_digital.c/pinMode.html ","date":"2020-05-01","objectID":"/arduino_reverse/:4:1","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Embedded C binary 48 00000080 \u003cmain\u003e: 49 #include \u003cavr/io.h\u003e 50 int main() 51 { 52 DDRB = 1\u003c\u003cPB5; 53 80: 80 e2 ldi r24, 0x20 ; 32 54 82: 84 b9 out 0x04, r24 ; 4 55 PORTB = 1\u003c\u003cPB5; 56 84: 85 b9 out 0x05, r24 ; 5 57 return 0; 58 86: 90 e0 ldi r25, 0x00 ; 0 59 88: 80 e0 ldi r24, 0x00 ; 0 60 8a: 08 95 ret At first sight, it‚Äôs clearly easier. Step-by-step instruction decoding: ldi r24, 0x20: according to the AVR ISA [1], ldi load the value 0x20 in r24 which is a General Purpose Working Register of the Arduino. out 0x04, r24: this instruction write the value stored in r24 at the address 0x04 (the address of DDRB according to [2]). 0x20=0b100000: DDRB5 is set to 1 üòâ out 0x05, r24: same thing, for PORTB. ","date":"2020-05-01","objectID":"/arduino_reverse/:4:2","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"Conclusion Embedded C code is usually quicker and smaller as long as we make some effort to study the datasheet. But it‚Äôs worth it when we‚Äôre working with embedded systems! üòâ ","date":"2020-05-01","objectID":"/arduino_reverse/:5:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["articles"],"content":"References AVR ISA ATMega328 datasheet ","date":"2020-05-01","objectID":"/arduino_reverse/:6:0","tags":["arduino","embedded"],"title":"Arduino vs. embedded C - AVR reversing","uri":"/arduino_reverse/"},{"categories":["tech-embedded"],"content":" The idea behind this tutorial is to show how to install SimulIDE to run codes for an Arduino Uno board. Screenshots below were taken from a Windows machine. It will be the same thing for Unix-based systems (tested on Ubuntu). Some comments for the Mac port at the end (but it works!) ","date":"2020-04-30","objectID":"/simulide/:0:0","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Downloading tools SimulIDE : v0.3.12-SR8 for the latest version. Download the Lin64.tar.gz or the Win32.zip archive depending of your operating system. Arduino. Download the Windows ZIP for non admin install or the Linux 64 bits archive. Extract softwares in a directory. You should get something similar to this: ","date":"2020-04-30","objectID":"/simulide/:1:0","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Example: blinking LEDs on an Arduino Uno In order to execute SimulIDE, run the executable at: SimulIDE_0.3.12-SR8_Win32/bin Here is the main interface : ","date":"2020-04-30","objectID":"/simulide/:2:0","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Schematic settings (red rectangle) 1 2 3 4 5 New Open Save Save as Run simulation ","date":"2020-04-30","objectID":"/simulide/:2:1","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Code editor settings (blue rectangle) 1 2 3 4 5 6 7 New Open Save Save as Find/Replace Compile Upload Open the LED fadding example (SimulIDE_0.3.12-SR8_Win32/share/simulide/examples/Arduino/ledFadding) .simu file for the schematic. .ino file for the code. ","date":"2020-04-30","objectID":"/simulide/:2:2","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Compiler configuration Right click on the ledFadding.ino and click Set Compiler Path. Select the directory where you have the Arduino executable (./simul_ide/arduino-1.8.12 in the screenshot below). Now you should be able to compile and upload your code! Now, just click on the red button in the upper left toolbar: Hint: if you need a serial monitor, right click on the Arduino and select Open Serial Monitor. ","date":"2020-04-30","objectID":"/simulide/:2:3","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-embedded"],"content":"Mac port of SimulIDE Could not get the internal code editor working. Just a few things to be aware of: Compile the binary in the Arduino editor. Then click on Sketch =\u003e Export compiled binary. Then, right click on the Arduino and select Load firmware and look for the *.hex file just compiled close to the Arduino project file. ","date":"2020-04-30","objectID":"/simulide/:3:0","tags":["simulide","arduino","simulation"],"title":"Quick start guide for SimulIDE as an Arduino simulator","uri":"/simulide/"},{"categories":["tech-security"],"content":"Prerequisites sudo apt install aircrack-ng Some wordlists/dictionaries. Kali Linux has already some of them. ","date":"2020-01-01","objectID":"/aircrack-101/:1:0","tags":["aircrack","security"],"title":"Aircrack 101 - How to get the password of a WEP/WPA2 session captured in Wireshark","uri":"/aircrack-101/"},{"categories":["tech-security"],"content":"WiFi handshakes 101 Introduction from @evilsocket‚Äôs Pwnagotchi: https://pwnagotchi.ai/intro/#wifi-handshakes-101 ","date":"2020-01-01","objectID":"/aircrack-101/:2:0","tags":["aircrack","security"],"title":"Aircrack 101 - How to get the password of a WEP/WPA2 session captured in Wireshark","uri":"/aircrack-101/"},{"categories":["tech-security"],"content":"Dictionary-based attack In order to test a PCAP with a given dictionary: aircrack-ng -w \u003cwordlist\u003e \u003cwireshark_file\u003e You have several dictionaries and sample PCAPs extracted from a Kali distro here: https://github.com/pcotret/aircrack-101-material ","date":"2020-01-01","objectID":"/aircrack-101/:3:0","tags":["aircrack","security"],"title":"Aircrack 101 - How to get the password of a WEP/WPA2 session captured in Wireshark","uri":"/aircrack-101/"},{"categories":["tech-security"],"content":"Wireshark captures https://wiki.wireshark.org/SampleCaptures One of them should work with a short dictionary. Find it üòâ ","date":"2020-01-01","objectID":"/aircrack-101/:3:1","tags":["aircrack","security"],"title":"Aircrack 101 - How to get the password of a WEP/WPA2 session captured in Wireshark","uri":"/aircrack-101/"},{"categories":["tech-embedded"],"content":"Prerequisites A RaspberryPi and a distro. For this tutorial, I had an up-to-date Raspbian Stretch Lite with LXDE. GCC and GDB. ","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:1:0","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-embedded"],"content":"ARM registers and stack TODO ","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:2:0","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-embedded"],"content":"An example of buffer overflow ","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:3:0","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-embedded"],"content":"Initial state We have a binary without its source code but compiled with debug information. We know how to use it: ./prog2 PASS where PASS is a 4-character string. We would like to know if there‚Äôs interesting stuff or even dead code in it. ","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:3:1","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-embedded"],"content":"Playground Run GDB: gdb prog2 What we can disassemble with GDB: (gdb) disassemble /usr/include/arm-linux-gnueabihf/bits/sys_errlist.h __gmon_start__ frame_dummy /usr/include/arm-linux-gnueabihf/bits/types.h __gmon_start__@plt int /usr/include/libio.h __init_array_end long int /usr/include/stdio.h __init_array_start long long int /usr/lib/gcc/arm-linux-gnueabihf/6/include/stddef.h __libc_csu_fini long long unsigned int _DYNAMIC __libc_csu_init long unsigned int _GLOBAL_OFFSET_TABLE_ __libc_start_main main _IO_2_1_stderr_ __libc_start_main@plt prog2.c _IO_2_1_stdin_ __off64_t puts _IO_2_1_stdout_ __off_t puts@plt _IO_FILE __quad_t register_tm_clones _IO_lock_t _bss_end__ short int _IO_marker _edata short unsigned int _IO_stdin_used _end signed char __FRAME_END__ _fini size_t __JCR_END__ _init sizetype __JCR_LIST__ _start stderr __TMC_END__ abort stdin __bss_end__ abort@plt stdout __bss_start call_weak_fn strcpy __bss_start__ char strcpy@plt __data_start completed sys_errlist __do_global_dtors_aux data_start sys_nerr __do_global_dtors_aux_fini_array_entry deregister_tm_clones unsigned char __dso_handle dont_touch_this unsigned int __end__ exit __frame_dummy_init_array_entry exit@plt Lots of stuff there‚Ä¶ We can find at least two interesting: main dont_touch_this. Yes, I compiled the code myself for this tutorial. Of course, you should not name critical code like this! Let‚Äôs disassemble the main function (gdb) disassemble main Dump of assembler code for function main: 0x000104b8 \u003c+0\u003e: push {r11, lr} 0x000104bc \u003c+4\u003e: add r11, sp, #4 0x000104c0 \u003c+8\u003e: sub sp, sp, #16 0x000104c4 \u003c+12\u003e: str r0, [r11, #-16] 0x000104c8 \u003c+16\u003e: str r1, [r11, #-20] ; 0xffffffec 0x000104cc \u003c+20\u003e: ldr r3, [r11, #-20] ; 0xffffffec 0x000104d0 \u003c+24\u003e: add r3, r3, #4 0x000104d4 \u003c+28\u003e: ldr r2, [r3] 0x000104d8 \u003c+32\u003e: sub r3, r11, #8 0x000104dc \u003c+36\u003e: mov r1, r2 0x000104e0 \u003c+40\u003e: mov r0, r3 0x000104e4 \u003c+44\u003e: bl 0x1032c \u003cstrcpy@plt\u003e 0x000104e8 \u003c+48\u003e: mov r3, #0 0x000104ec \u003c+52\u003e: mov r0, r3 0x000104f0 \u003c+56\u003e: sub sp, r11, #4 0x000104f4 \u003c+60\u003e: pop {r11, pc} End of assembler dump. No call to dont_touch_this. It means this is a dead code section. Why? Oh, strcpy! We found a breach! This functions must not be used nowadays as it doesn‚Äôt check buffer length (https://security.web.cern.ch/security/recommendations/en/codetools/c.shtml). We should try a buffer overflow at this line. If we disassemble dont_touch_this, we can get the entry point of this function (address 0x0001049c): (gdb) disassemble dont_touch_this Dump of assembler code for function dont_touch_this: 0x0001049c \u003c+0\u003e: push {r11, lr} 0x000104a0 \u003c+4\u003e: add r11, sp, #4 0x000104a4 \u003c+8\u003e: ldr r0, [pc, #8] ; 0x104b4 \u003cdont_touch_this+24\u003e 0x000104a8 \u003c+12\u003e: bl 0x10338 \u003cputs@plt\u003e 0x000104ac \u003c+16\u003e: mov r0, #0 0x000104b0 \u003c+20\u003e: bl 0x1035c \u003cexit@plt\u003e 0x000104b4 \u003c+24\u003e: andeq r0, r1, r8, ror #10 End of assembler dump. Putting a breakpoint right after the strcpy: (gdb) break *0x000104e8 Breakpoint 1 at 0x104e8: file prog2.c, line 14. Running the program with valid input and checking registers and stack values: (gdb) run AAAA Starting program: /home/pi/Documents/tutorial/prog2 AAAA Breakpoint 1, main (argc=2, argv=0x7efff684) at prog2.c:14 14 return 0; (gdb) info registers r0 0x7efff524 2130703652 r1 0x7efff7d7 2130704343 r2 0x0 0 r3 0x9 9 r4 0x104f8 66808 r5 0x0 0 r6 0x10374 66420 r7 0x0 0 r8 0x0 0 r9 0x0 0 r10 0x76fff000 1996484608 r11 0x7efff52c 2130703660 r12 0x7efff524 2130703652 sp 0x7efff518 0x7efff518 lr 0x104e8 66792 pc 0x104e8 0x104e8 \u003cmain+48\u003e cpsr 0x20000010 536870928 (gdb) x/16x $sp 0x7efff518: 0x7efff684 0x00000002 0x00000000 0x41414141 0x7efff528: 0x00000000 0x76e80678 0x76fa5000 0x7efff684 0x7efff538: 0x00000002 0x000104b8 0x76ffecf0 0x7efff5d0 0x7efff548: 0xf35a2f10 0xfb4ddc14 0x000104f8 0x00000000 In the stack, we can see our AAAA as 0x41414141 (ASCII codes, little-endian). 0x76e80678 is the return address. Same thing with longer input: (gdb) run ABCDABCD Starting program: /home/pi/Documents/tutorial/prog2 ABCDABCD","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:3:2","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-embedded"],"content":"References https://www.merckedsecurity.com/blog/smashing-the-arm-stack-part-1 http://billyellis.net/ ","date":"2020-01-01","objectID":"/buffer-overflow-raspberrypi/:4:0","tags":["buffer","raspberry","overflow"],"title":"Buffer overflow on ARM architecture","uri":"/buffer-overflow-raspberrypi/"},{"categories":["tech-misc"],"content":"Update 03/2018 : autre technique dans le labo d‚ÄôHeliox (propre aussi !) https://www.youtube.com/watch?v=8joLK039fjk De bas en haut : m√©thode de l‚Äôimprimante laser mais trop chauff√© m√©thode de l‚Äôimprimante laser mais mal d√©coll√© m√©thode de l‚Äôimprimante laser repass√© au marqueur ind√©l√©bile (meilleur r√©sultat pour application ‚Äúindustrielle‚Äù) masque r√©alis√© au typex, pas terrible car le blanco se d√©colle pendant le bain d‚Äôacide. Je testerai avec du verni √† ongle pour voir‚Ä¶ masque r√©alis√© au marqueur ind√©l√©bile M√©thode de l‚Äôimprimante laser : on imprime sur du papier le typon qu‚Äôon souhaite r√©aliser. Ensuite on met le papier contre le PCB (duquel on a √¥t√© la couche de verni protecteur √† l‚Äôac√©tone) et on chauffe. J‚Äôai fait √ßa sur mes plaques de cuisson (une feuille d‚Äôalu sur le vitroc√©ramique presque au minimum, sinon √ßa crame la plaque cf le test du bas, et quelque chose pour faire du poids qui ne craint pas la chaleur au dessus), mais on peut aussi utiliser un fer √† repasser. Apr√®s 1/2 heure (les deux tests du bas √©taient rest√© qu'1/4 d‚Äôheure et c‚Äô√©tait pas assez) on retire √ßa du feu et on le plonge dans l‚Äôeau chaude. Laissez tremper facilement 10-15 min et retirer PR√âCAUTIONNEUSEMENT (c‚Äôest l‚Äô√©tape la plus d√©licate) le papier en LAISSANT l‚Äôencre sur le PCB. C‚Äôest pour cette raison qu‚Äôil faut une imprimante laser : l‚Äôencre n‚Äôest qu‚Äôun film √† la surface du papier, tandis qu‚Äôavec une jet d‚Äôencre, l‚Äôencre est liquide et p√©n√®tre en profondeur (hum \u003c3 ) le papier, rendant la manip impossible. Ensuite il suffit de placer tout √ßa dans le bain. Le bain en question se fait avec 2/3 de vinaigre blanc (acide ac√©tique) et 1/3 d‚Äôeau oxyg√©n√©e (peroxyde d‚Äôhydrog√®ne), si les concentrations sont les m√™mes (les miens √©taient √† 10¬∞ tous les deux par exemple, si vous trouvez des trucs plus concentr√©s bien s√ªr √ßa fonctionne mieux mais il faut adapter les proportions pour que √ßa reste st≈ìchiom√©trique : 1 mol d‚Äôacide pour 1 mol de peroxyde, vous avez les masses molaires et masses volumique sur Wikip√©dia). Il faut ensuite juste mettre du sel de cuisine (une bonne cuiller √† soupe pour 200mL environ, y‚Äôen aura jamais trop de toute fa√ßon) ou de l‚Äôacide sulfurique (c‚Äôest de l‚Äôacide √† batterie, par contre aucune id√©e des quantit√©s √† mettre, au pire c‚Äôest qu‚Äôun catalyseur). Laisser les PCBs dedans pendant 20-30 min (il faut rester √† c√¥t√© sur la fin pour pas qu‚Äôils soient trop attaqu√©s) en touillant de temps en temps (avec un bulleur d‚Äôaquarium √ßa doit √™tre le mieux) Enfin il ne vous reste plus qu‚Äô√† nettoyer les traces de masque (que ce soit du verni √† ongle, du blanco, ou l‚Äôencre d‚Äôimprimante, de l‚Äôac√©tone fait tr√®s bien l‚Äôaffaire), et vous avez vos PCBs ","date":"2020-01-01","objectID":"/pcb-maison/:1:0","tags":["pcb"],"title":"Comment faire des PCB avec des produits basiques","uri":"/pcb-maison/"},{"categories":["tech-misc"],"content":"Convert an SVG to PNG in commande line using Inkscape (on Windows) Change export-height if you want a bigger image: @echo off for %%f in (%*) do ( echo %%~f \"C:\\Program Files\\Inkscape\\inkscape.exe\" ^ -z ^ --export-background-opacity=0 ^ --export-height=48 ^ --export-png=\"%%~dpnf.png\" ^ --file=\"%%~f\" ) ","date":"2020-01-01","objectID":"/image_scripts/:1:0","tags":["scripts"],"title":"Image processing","uri":"/image_scripts/"},{"categories":["tech-misc"],"content":"Resize an image with Inkscape for %%f in (*.png) do convert.exe %%f -resize 384x384 -background black -gravity center -extent 384x384 %%f ","date":"2020-01-01","objectID":"/image_scripts/:2:0","tags":["scripts"],"title":"Image processing","uri":"/image_scripts/"},{"categories":["tech-misc"],"content":"Convert a Dia diagram in EPS then PDF #!/bin/bash filename=$(basename -- $1) extension=\"${filename##*.}\" filename=\"${filename%.*}\" echo $filename dia -e $filename.eps -t eps $1 epstopdf --outfile=$filename.pdf $filename.eps ","date":"2020-01-01","objectID":"/image_scripts/:3:0","tags":["scripts"],"title":"Image processing","uri":"/image_scripts/"},{"categories":["tech-hardware"],"content":"Installing Vivado Vivado Design Suite - HLx Editions - 2019.2 for the latest version: https://www.xilinx.com/support/download.html Tutorial available here: : https://www.dropbox.com/s/sgxhb08tcwuj9ko/Download_%26_Install_VIVADO_On_Ubuntu_July_3.pdf?dl=0 ","date":"2020-01-01","objectID":"/fpga-env-101/:1:0","tags":["fpga","xilinx"],"title":"Installing a Xilinx FPGA environment for an Ubuntu-based machine","uri":"/fpga-env-101/"},{"categories":["tech-hardware"],"content":"License Infos available in another note. However, some families don‚Äôt need a license file üòâ ","date":"2020-01-01","objectID":"/fpga-env-101/:1:1","tags":["fpga","xilinx"],"title":"Installing a Xilinx FPGA environment for an Ubuntu-based machine","uri":"/fpga-env-101/"},{"categories":["tech-hardware"],"content":"Pre-configuration Before executing Vivado, a few things to be aware of: Add this line in your $HOME/.bashrc (amongst other things, this script add binaries to PATH) : source /opt/Xilinx/Vivado/2018.2/settings64.sh # Modify the path to Vivado if needed Now, Vivado could be executed with the command: vivado It may be easier to have write rights on the Vivado install directory: chown -R $USER /opt/Xilinx Board drivers may be installed with scripts at /opt/Xilinx/Vivado/2018.3/data/xicom/cable_drivers/lin64/install_script ","date":"2020-01-01","objectID":"/fpga-env-101/:1:2","tags":["fpga","xilinx"],"title":"Installing a Xilinx FPGA environment for an Ubuntu-based machine","uri":"/fpga-env-101/"},{"categories":["tech-hardware"],"content":"‚ÄúHello World‚Äù tutorial for Zedboard and Nexys4 For the Zedboard: https://gitlab.com/pcotret/hello-zedboard Without going into details, it allows the user to compile a first design and verifies that the user can talk with the board. For the Nexys4: https://reference.digilentinc.com/learn/programmable-logic/tutorials/nexys-4-ddr-programming-guide/start#tutorial ","date":"2020-01-01","objectID":"/fpga-env-101/:1:3","tags":["fpga","xilinx"],"title":"Installing a Xilinx FPGA environment for an Ubuntu-based machine","uri":"/fpga-env-101/"},{"categories":["tech-hardware"],"content":"VHDL simulation Vivado includes a VHDL simulator which seems not optimal to me. Furthermore, for a quick simulation of a tiny component, it may be interesting to get a simulator without all the FPGA vendor layer. Modelsim is a well-known solution: Problem #1 : Modelsim is usually included in a bundle with other tools. Problem #2 : Modelsim isn‚Äôt very 64-bits friendly Here is a note to set up Modelsim on a 64-bit Ubuntu machine. ","date":"2020-01-01","objectID":"/fpga-env-101/:2:0","tags":["fpga","xilinx"],"title":"Installing a Xilinx FPGA environment for an Ubuntu-based machine","uri":"/fpga-env-101/"},{"categories":["tech-hardware"],"content":"Lattice iCEcube2 has not been updated for a while‚Ä¶ ","date":"2020-01-01","objectID":"/lattice-ubuntu/:0:0","tags":["lattice","ubuntu"],"title":"Installing Lattice iCEcube2 FPGA tools on Ubuntu","uri":"/lattice-ubuntu/"},{"categories":["tech-hardware"],"content":"Installing an old libpng package wget http://security.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng12-0_1.2.54-1ubuntu1.1_i386.deb sudo dpkg -i libpng12-0_1.2.54-1ubuntu1.1_i386.deb ","date":"2020-01-01","objectID":"/lattice-ubuntu/:1:0","tags":["lattice","ubuntu"],"title":"Installing Lattice iCEcube2 FPGA tools on Ubuntu","uri":"/lattice-ubuntu/"},{"categories":["tech-hardware"],"content":"Going through the interface issue Lattice iCEcube2 license takes into account the MAC address of the computer. In order to work, the interface must be labeled as eth0 as stated on the TinyFPGA forum (don‚Äôt ask me why‚Ä¶) $ sudo ip link add eth0 type dummy $ sudo ip link set eth0 address 10:65:30:ee:48:9a Now, iCEcube2 should work! ","date":"2020-01-01","objectID":"/lattice-ubuntu/:2:0","tags":["lattice","ubuntu"],"title":"Installing Lattice iCEcube2 FPGA tools on Ubuntu","uri":"/lattice-ubuntu/"},{"categories":["tech-hardware"],"content":"Shebang You may need to modify the shebang of binary scripts installed in $INSTALL_DIR/synpbase/bin (for instance, #!/bin/sh to #!/bin/bash). ","date":"2020-01-01","objectID":"/lattice-ubuntu/:3:0","tags":["lattice","ubuntu"],"title":"Installing Lattice iCEcube2 FPGA tools on Ubuntu","uri":"/lattice-ubuntu/"},{"categories":["tech-misc"],"content":"Using ttfamily with bfseries in a listing Default font doesn‚Äôt implement bold style: \\renewcommand{\\ttdefault}{pcr} \\begin{lstlisting}[basicstyle=\\ttfamily\\bfseries] y:=2 \\end{lstlisting} ","date":"2020-01-01","objectID":"/latex_tips/:1:0","tags":["latex"],"title":"LateX tips","uri":"/latex_tips/"},{"categories":["tech-misc"],"content":"Makefile to compile a LateX project ## Here is a simple Makefile for a basic LaTeX flow with a bibliography ## make help: ## print this menu ## make all: ## compile the stuff ## make clean: ## remove temporary files ## make clean_pdf: ## remove the output PDF file ## make clean_all: ## remove EVERYTHING # Variables FILENAME=mainfile BIBNAME=mainfile help: @grep -e \"^##\" Makefile; all: pdflatex ${FILENAME}.tex bibtex ${BIBNAME} pdflatex ${FILENAME}.tex pdflatex ${FILENAME}.tex clean: rm *.aux *.bbl *.blg *.log *.gz *.tns *.out clean_pdf: rm *.pdf clean_all: clean clean_pdf ","date":"2020-01-01","objectID":"/latex_tips/:2:0","tags":["latex"],"title":"LateX tips","uri":"/latex_tips/"},{"categories":["tech-misc"],"content":"Batch file to compile on Windows set FILENAME=filename set BIBNAME=filename @echo off cls :question echo. echo 1. Compile the document echo 2. Clean everything but keep the PDF echo 3. Really clean EVERYTHING set /p choix=What do you want to do (1/2/3)? : if /I \"%choix%\"==\"1\" (goto :compile) if /I \"%choix%\"==\"2\" (goto :clean) if /I \"%choix%\"==\"3\" (goto :clean_all) goto question :compile pdflatex %FILENAME%.tex bibtex %BIBNAME% pdflatex %FILENAME%.tex pdflatex %FILENAME%.tex goto end :clean del %FILENAME%.aux del %BIBNAME%.bbl del %BIBNAME%.blg del %FILENAME%.log goto end :clean_all del %FILENAME%.aux del %BIBNAME%.bbl del %BIBNAME%.blg del %FILENAME%.log del %FILENAME%.pdf goto end :end echo Thanks for using this tool :) ","date":"2020-01-01","objectID":"/latex_tips/:3:0","tags":["latex"],"title":"LateX tips","uri":"/latex_tips/"},{"categories":["tech-misc"],"content":"Here is a way to convert Marp slides in PDF with emojis: npx @marp-team/marp-cli main.md -o output.pdf --allow-local-files https://github.com/marp-team/marp-cli nodejs must be installed ","date":"2020-01-01","objectID":"/marp-to-pdf/:0:0","tags":["marp"],"title":"Marp to PDF","uri":"/marp-to-pdf/"},{"categories":["tech-embedded"],"content":"This note was inspired by a work of Samuele Giraudo (LIGM, Universit√© Paris-Est Marne-la-Vall√©e) http://igm.univ-mlv.fr/~giraudo/Enseignements/ ","date":"2020-01-01","objectID":"/memory-alignment/:0:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"Memory alignment https://en.wikipedia.org/wiki/Data_structure_alignment Memory alignment of a given data is the way this data is organized in the memory. For instance, an array of n elements of type T is organized as a continuous array of sizeof(T) * n bytes. How does memory alignment work for variables of a structured type? Let‚Äôs find out üòä ","date":"2020-01-01","objectID":"/memory-alignment/:1:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"Memory alignment within a structured type Let‚Äôs consider the following declarations: typedef struct { uint8_t x; uint8_t y; uint16_t z; }A; typedef struct { uint8_t x; uint16_t z; uint8_t y; }B; A and B are two structured types based on the same fields. Only fields order matters. However, printf(\"%lu %lu\\n\", sizeof(A), sizeof(B)); displays 4 6. A and B have diferrent size due to memory alignment‚Ä¶ ","date":"2020-01-01","objectID":"/memory-alignment/:2:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"Completion bytes Completion bytes are inserted in order to make each field of a structured type beginning at an address multiple of its type. In our example, we know that each field of uint8_t (resp. uint16_t) must begin at an address multiple of 1 (resp. 2). ","date":"2020-01-01","objectID":"/memory-alignment/:3:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"Manual access Let a a variable of type A initialized by: A a = {0x10, 0x20, 0x30}; We can access fields of this structure as follows: uint8_t x, y; uint16_t z; void *p; p = \u0026a; x = *((uint8_t *) p); /* Equivalent a x = a.x; */ p += 1; y = *((uint8_t *) p); /* Equivalent a y = a.y; */ p += 1; z = *((uint16_t *) p); /* Equivalent a z = a.z; */ Let b a variable of type B initialized by: B b = {0x10, 0x20, 0x30}; We can access fields of this structure as follows: uint8_t x, y; uint16_t z; void *p; p = \u0026a; x = *((uint8_t *) p); /* Equivalent a x = a.x; */ p += 2; y = *((uint8_t *) p); /* Equivalent a y = a.y; */ p += 2; z = *((uint16_t *) p); /* Equivalent a z = a.z; */ ","date":"2020-01-01","objectID":"/memory-alignment/:4:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"-Wpadded option The compiler flag -Wpadded gives a warning when a type needs completion bytes. For instance, with the structured type B defined by: typedef struct { uint8_t x; uint16_t z; uint8_t y; } B; The follwing warning appears in the terminal: main.c:7:1: warning: padding struct size to alignment boundary [-Wpadded] } B; ","date":"2020-01-01","objectID":"/memory-alignment/:5:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-embedded"],"content":"Memory alignment ‚Äî A summary Memory alignment for variables of a structured type relies on several parameters such as: Processor architecture on which the code has been compiled. Compiler itself. Therefore, it is recommended to be aware that size of a structured type is not a trivial issue and depends of the context. ","date":"2020-01-01","objectID":"/memory-alignment/:6:0","tags":["memory"],"title":"Memory alignment","uri":"/memory-alignment/"},{"categories":["tech-networks"],"content":" Mainly based on an official tutorial (link). A Google Drive with several Cisco IOS: https://drive.google.com/drive/folders/102jxZ9ECpe6ZFtXYdK_81iEVuuFoGOGR. In this tutorial, the c7200 is used. You may not have the same interfaces in another case. ","date":"2020-01-01","objectID":"/first_topology/:0:0","tags":["gns3","simulation"],"title":"My first topology","uri":"/first_topology/"},{"categories":["tech-networks"],"content":"Topology creation Take two c7200 routers and add them to the schematic by a ‚Äúdrag and drop‚Äù. We can see our two routers: Use the link icon in order to‚Ä¶ ‚Ä¶link them. In this case, we connect the FastEthernet0/0 interfaces of the routers. Below, the green Start button (marked #1) and the Console button (marked #2) have been selected. Now, let‚Äôs configure the routers. Reminder: GNS3 runs IOS images, it‚Äôs like playing with a real router (commands are the same). ","date":"2020-01-01","objectID":"/first_topology/:1:0","tags":["gns3","simulation"],"title":"My first topology","uri":"/first_topology/"},{"categories":["tech-networks"],"content":"Routers configuration R1# sh ip int br Interface IP-Address OK? Method Status Protocol FastEthernet0/0 unassigned YES unset administratively down down FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down FastEthernet4/0 unassigned YES unset administratively down down As you can see, all interfaces are administratively down. Same thing for R2: R2# sh ip int br Interface IP-Address OK? Method Status Protocol FastEthernet0/0 unassigned YES unset administratively down down FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down FastEthernet4/0 unassigned YES unset administratively down down Let‚Äôs configure fa0/0 and loopback0 interfaces: R1# conf t R1(config)# int fa0/0 R1(config-if)#ip add 10.1.1.1 255.255.255.0 R1(config-if)#int loop 0 R1(config-if)#ip add 1.1.1.1 255.255.255.255 R1(config-if)# end R1#sh ip int br Interface IP-Address OK? Method Status Protocol FastEthernet0/0 10.1.1.1 YES manual administratively down down FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down FastEthernet4/0 unassigned YES unset administratively down down Loopback0 1.1.1.1 YES manual up up Interfaces are correctly configured. There‚Äôs only one difference: loopback virtual interfaces are automatically enabled (up state). In order to enable fa0/0: R1# conf t R1(config)#int fa0/0 R1(config-if)#no shut R1(config-if)#end R1#sh ip int br Interface IP-Address OK? Method Status Protocol FastEthernet0/0 10.1.1.1 YES manual up up FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down FastEthernet4/0 unassigned YES unset administratively down down Loopback0 1.1.1.1 YES manual up up Let‚Äôs configure R2: R2#conf t R2(config)#int fa0/0 R2(config-if)#no shut R2(config-if)#ip add 10.1.1.2 255.255.255.0 R2(config-if)#int loop 0 R2(config-if)#ip add 2.2.2.2 255.255.255.255 R2(config-if)# end R2#sh ip int br Interface IP-Address OK? Method Status Protocol FastEthernet0/0 10.1.1.2 YES manual up up FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down FastEthernet4/0 unassigned YES unset administratively down down Loopback0 2.2.2.2 YES manual up up We can have some information about the IOS with the following command: R2#sh ver Cisco IOS Software, 7200 Software (C7200-JK9S-M), Version 12.4(13b), RELEASE SOFTWARE (fc3) Technical Support: http://www.cisco.com/techsupport Copyright (c) 1986-2007 by Cisco Systems, Inc. Compiled Wed 25-Apr-07 03:18 by prod_rel_team [...] By now, R1 and R2 can talk to each other: R2#ping 10.1.1.1 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 10.1.1.1, timeout is 2 seconds: .!!!! Success rate is 80 percent (4/5), round-trip min/avg/max = 44/57/64 ms Only 80% of packets are received, don‚Äôt worry! The first packet is lost due to the ARP address resolution (reminder: ARP is mainly responsible for translating IP to MAC addresses). Here is a ping in the other direction: R1#ping 10.1.1.2 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 10.1.1.2, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 60/62/68 ms 100% of packets are received as the ARP exchange is already done! ","date":"2020-01-01","objectID":"/first_topology/:2:0","tags":["gns3","simulation"],"title":"My first topology","uri":"/first_topology/"},{"categories":["tech-networks"],"content":"OSPF routing R1#conf t R1(config)#router ospf 1 R1(config-router)#router-id 1.1.1.1 R1(config-router)#network 0.0.0.0 255.255.255.255 area 0 R1(config-router)#end R2#conf t R2(config)#router ospf 1 R2(config-router)#router-id 2.2.2.2 R2(config-router)#network 0.0.0.0 255.255.255.255 area 0 R2(config-router)#end List of R2 neighbors: R2#sh ip ospf neigh Neighbor ID Pri State Dead Time Address Interface 1.1.1.1 1 FULL/DR 00:00:32 10.1.1.1 FastEthernet0/0 1.1.1.1 is the address of R1. R1 routing table: R1#sh ip route Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2 E1 - OSPF external type 1, E2 - OSPF external type 2 i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2 ia - IS-IS inter area, * - candidate default, U - per-user static route o - ODR, P - periodic downloaded static route Gateway of last resort is not set 1.0.0.0/32 is subnetted, 1 subnets C 1.1.1.1 is directly connected, Loopback0 2.0.0.0/32 is subnetted, 1 subnets O 2.2.2.2 [110/2] via 10.1.1.2, 00:08:21, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets C 10.1.1.0 is directly connected, FastEthernet0/0 R1#ping 2.2.2.2 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 8/24/72 ms There‚Äôs the OSPF route towards 2.2.2.2. On the R2 side: R2#ping 1.1.1.1 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 1.1.1.1, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 12/28/40 ms ","date":"2020-01-01","objectID":"/first_topology/:3:0","tags":["gns3","simulation"],"title":"My first topology","uri":"/first_topology/"},{"categories":["tech-networks"],"content":"Router configuration backup By default, GNS3 won‚Äôt save routers configuration. It can be done manually: R1#copy running-config startup-config Next time GNS3 is launched, routers will still be configured! ","date":"2020-01-01","objectID":"/first_topology/:4:0","tags":["gns3","simulation"],"title":"My first topology","uri":"/first_topology/"},{"categories":["tech-embedded"],"content":"The goal was to get a single-board computer able to execute Gnuradio tools quite smoothly with various SDR devices (USB dongles, HackRF, USRP development boards). Unfortunately, the RaspberryPi family (both PiB+ and Pi2) did not met such requirements due to a lack of throughput in the USB controller. This tutorial introduces another solution based on a Chinese alternative called OrangePi [1]. For the operating system, Debian Jessie (8.2 version) is used: https://www.debian.org/releases/stable/ ","date":"2020-01-01","objectID":"/orangepi4sdr/:0:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Requirements ","date":"2020-01-01","objectID":"/orangepi4sdr/:1:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Hardware An OrangePiMini2 (bought from Aliexpress [2]). Main features : Allwinner H3 CPU (quad-core Cortex-A7 @ 1.6GHz) 1GB RAM memory A 5V/2A power supply such as [3]. Otherwise, the OrangePi kit comes with an USB cable that works fine (an external computer is required) A ¬µSD card: class 10 is the best (of course, video and Ethernet cables) ","date":"2020-01-01","objectID":"/orangepi4sdr/:1:1","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Software All OrangePi software parts are available from a Google Drive directory (click here). You need to get: Debian_wheezy_mini.img.xz: the minimal Debian Jessie image (without graphical user interface) scriptbin_kernel.tar.gz: the kernel image and boot-related stuff Win32DiskImager from http://sourceforge.net/projects/win32diskimager SDFormatter from https://www.sdcard.org/downloads/formatter_4 It is assumed that you decompress .xz files somewhere on your computer. Other OS images can be downloaded from this Google Drive or directly from OrangePi website: http://www.orangepi.org/downloadresources/ ","date":"2020-01-01","objectID":"/orangepi4sdr/:1:2","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Creating ¬µSD image This step was tested on Windows. Similar results are expected on Linux using fdisk and dd commands. ","date":"2020-01-01","objectID":"/orangepi4sdr/:2:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"OS image First of all, format your SD card: Connect your ¬µSD card and open SDFormatter Take care of the drive letter (it will erase everything in the device) Open Option menu and select Yes for Format size adjustment Click on Format and answer Yes in the next popups =\u003e Your card is ready ! Then, you can copy the Debian minimal image using Win32DiskImager: check the device letter and look for the Debian_jessie_mini.img OS image on your computer. Confirm and wait a few minutes‚Ä¶ ","date":"2020-01-01","objectID":"/orangepi4sdr/:2:1","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Kernel and boot stuff Once this step is done, disconnect and reconnect your ¬µSD card. You should see a device called BOOT coming up: it contains the kernel image and boot-related stuff. These files are replaced with the latest ones available from OrangePi. Open the BOOT device in your explorer and erase everything inside. Then, from your scriptbin_kernel decompressed folder: Copy script.bin.OPI-2_1080p60 and rename it as script.bin Copy uImage_OPI-2 and rename it as uImage Your ¬µSD card is ready to boot on the OrangePiMini2 ! ","date":"2020-01-01","objectID":"/orangepi4sdr/:2:2","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"First boot At first power-up, when asked for login/password, just use orangepi/orangepi (be careful, it is configured with a QWERTY keyboard layout by default). You should see a terminal like this: ","date":"2020-01-01","objectID":"/orangepi4sdr/:3:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Disk resize The first step is to resize partitions to fit the maximum capacity of your ¬µSD card. OrangePi already prepared a tool. Type sudo fs_resize: Then, reboot using sudo reboot. ","date":"2020-01-01","objectID":"/orangepi4sdr/:3:1","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Desktop install As this is a minimal Debian image, it does not come with a GUI but you can install whatever you want. In this tutorial, LXDE has been chosen for installation. Thanks to OrangePi, there are already some scripts to install some GUIs such as LXDE, XFCE or Mate (a Gnome2 fork). Type cd /usr/local/bin. Type sudo install_lxde_desktop and wait a few minutes‚Ä¶ Reboot one last time‚Ä¶ ","date":"2020-01-01","objectID":"/orangepi4sdr/:4:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":"Result Tada ! After the login screen (still orangepi/orangepi), you get a fully functional desktop: you can install whatever you want. In the above figure, the goal was to install GQRX, Gnuradio and some other tools: it run quite smoothly ! (especially compared to RaspberryPis). In this configuration, following binaries were installed: sudo apt-get install gnuradio gnuradio-dev rtl-sdr librtlsdr* hackrf gpredict gqrx-sdr libhackrf* References Orangepi website. http://www.orangepi.org/. Orangepimini2. 5v/2a power supply. ","date":"2020-01-01","objectID":"/orangepi4sdr/:5:0","tags":["sdr","orangepi"],"title":"OrangePi4SDR","uri":"/orangepi4sdr/"},{"categories":["tech-embedded"],"content":" 128 registers available in SPARC. Each window is divided in 3 areas: 8 input registers (i0-i7) 8 local registers (l0-l7) 8 output registers (o0-07) input // Function F1 local output input // Save instruction (F2 called in F1) local output input // Save instruction (F3 called in F2) local output As you can see, each time a function is called in another, the registers window ‚Äúslides‚Äù: by the way, output registers of $F_n$ are equal to input registers of $F_{n+1}$. Consequence #1 : 24 registers are consumed for F_1, 40 for F_2‚Ä¶ Reg_total = 24 + (n-1) x 16, 1 \u003c= n \u003c= 6 Consequence #2 : we cannot have more than 6 function calls at a given time (i.e. F_1 calling F_2 calling F_3 [‚Ä¶] calling F_6). In this case, 120 registers are used. Consequence #3 : if a seventh function call happens, a window overflow trap will happen (exception 0x05, see Table 7-1 in the SPARC v8 ISA). This seventh function would need 16 more registers while only 8 registers only are available‚Ä¶ ","date":"2020-01-01","objectID":"/sparc_window_registers/:0:0","tags":["sparc","registers"],"title":"Register windows in SPARC","uri":"/sparc_window_registers/"},{"categories":["tech-hardware"],"content":"Install Modelsim on a 64-bit (x)Ubuntu wget http://download.altera.com/akdlm/software/acdsinst/13.1/162/ib_installers/ModelSimSetup-13.1.0.162.run chmod +x ModelSimSetup-13.1.0.162.run However, the free version of Modelsim Altera Edition is 32-bit only. We need to install some dependencies: sudo dpkg --add-architecture i386 sudo apt-get update sudo apt-get install build-essential sudo apt-get install gcc-multilib g++-multilib lib32z1 lib32stdc++6 lib32gcc1 expat:i386 fontconfig:i386 libfreetype6:i386 libexpat1:i386 libc6:i386 libgtk-3-0:i386 libcanberra0:i386 libpng16-16:i386 libice6:i386 libsm6:i386 libncurses5:i386 zlib1g:i386 libx11-6:i386 libxau6:i386 libxdmcp6:i386 libxext6:i386 libxft2:i386 libxrender1:i386 libxt6:i386 libxtst6:i386 Next, we need to build a free version of FreeType: wget http://download.savannah.gnu.org/releases/freetype/freetype-2.4.12.tar.bz2 tar -xjvf freetype-2.4.12.tar.bz2 cd freetype-2.4.12 ./configure --build=i686-pc-linux-gnu \"CFLAGS=-m32\" \"CXXFLAGS=-m32\" \"LDFLAGS=-m32\" make -j$(nproc) Then, install Modelsim: sudo ./ModelSimSetup-13.1.0.162.run Note: I‚Äôll assume that Modelsim is installed in opt/modelsim for the next steps. Copy the FreeType libraries in Modelsim folder: cd /opt/modelsim/modelsim_ase sudo mkdir lib32 sudo cp ~/freetype-2.4.12/objs/.libs/libfreetype.so* ./lib32 ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:1:0","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"Modify the bin/vsim script ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:2:0","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"Step 1 - Path to the FreeType folder Search for the following line: dir=`dirname $arg0` and underneath add the following new line: export LD_LIBRARY_PATH=${dir}/lib32 ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:2:1","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"Step2 - Modify the RedHat only support Search for the following string: vco=\"linux_rh60\" and replace by: vco=\"linux\" ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:2:2","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"Step 3 - Change VCO mode Search for the following line: mode=${MTI_VCO_MODE:-\" \"} and replace by: mode=${MTI_VCO_MODE:-\"32\"} ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:2:3","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"Running Modelsim Now, you should be able to run Modelsim with: ./bin/vsim ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:3:0","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["tech-hardware"],"content":"References https://mil.ufl.edu/3701/docs/quartus/linux/ModelSim_linux.pdf http://mattaw.blogspot.com/2014/05/making-modelsim-altera-starter-edition.html ","date":"2020-01-01","objectID":"/modelsim-ubuntu/:4:0","tags":["modelsim","ubuntu"],"title":"Running Modelsim on a 64-bit Ubuntu","uri":"/modelsim-ubuntu/"},{"categories":["talks"],"content":"DevFest Bout du Monde - 28/02/2020 How to describe hardware code in Python down to the processor. Quick note about the license mess in the embedded world (in üá´üá∑). Con website and slides. ","date":"2020-01-01","objectID":"/talks/:1:0","tags":["installation"],"title":"Talks","uri":"/talks/"},{"categories":["talks"],"content":"Toulouse Hacking Convention - 09/03/2018 Results of a research project (link). Con website and slides. ","date":"2020-01-01","objectID":"/talks/:2:0","tags":["installation"],"title":"Talks","uri":"/talks/"},{"categories":["tech-hardware"],"content":"Just because I‚Äôm too lazy to rewrite the few lines needed to get Vivado running. ","date":"2020-01-01","objectID":"/xilinx_bashrc/:0:0","tags":["xilinx","settings"],"title":"Xilinx settings in `~/.bashrc`","uri":"/xilinx_bashrc/"},{"categories":["tech-hardware"],"content":"Requirements Xilinx tools are installed in /opt/Xilinx You have write rights in this repository. Otherwise, just run a chown -R on /opt/Xilinx For this note, I assume you have the 2018.2 version installed on a 64-bit OS. Your license file is /opt/Xilinx/Xilinx.lic These lines have to be added at the end of your ~/.bashrc file source /opt/Xilinx/Vivado/2018.2/settings64.sh # To be completed ","date":"2020-01-01","objectID":"/xilinx_bashrc/:1:0","tags":["xilinx","settings"],"title":"Xilinx settings in `~/.bashrc`","uri":"/xilinx_bashrc/"},{"categories":["tech-embedded"],"content":"1. Introduction Yocto provides tools and metadata for creating custom embedded systems with following main features : Images are tailored to specific hardware and use cases But metadata is generally arch-independent Unlike a distro, kitchen sink is not included (we know what we need in advance) Other keywords and their meanings are explained here: An image is a collection of baked recipes (packages) A ‚Äòrecipe‚Äô is a set of instructions for building packages Where to get the source and which patches to apply Dependencies (on libraries or other recipes, for example) Config/compile options, install customization A layer is a logical collection of recipes representing the core, a board support package (BSP), or an application stack ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:1:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"1.1. Packages to be installed sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib \\ build-essential chrpath socat cpio python python3 python3-pip python3-pexpect \\ xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev \\ pylint3 xterm ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:1:1","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"1.2. Clone Yocto and recipes (zeus branch) git clone -b zeus https://git.yoctoproject.org/git/poky cd poky # Next clones must be done in the poky folder git clone -b zeus https://github.com/Xilinx/meta-xilinx git clone -b zeus https://github.com/openembedded/meta-openembedded.git ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:1:2","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"1.3. Build configuration source oe-init-build-env Modifications in conf/local.conf: # Change the default target $ echo \"MACHINE??=\\\"zedboard-zynq7\\\"\" \u003e\u003e conf/local.conf # Add a few lines $ echo \"IMAGE_FEATURES += \\\"package-management\\\"\" \u003e\u003e conf/local.conf $ echo \"DISTRO_HOSTNAME = \\\"zynq\\\"\" \u003e\u003e conf/local.conf You may also like to change the package type from rpm to deb: modify PACKAGE_CLASSES '= \"package_rpm\" by PACKAGE_CLASSES '= \"package_deb\" Modifications in conf/bblayers.conf in order to add the cloned layers: $ bitbake-layers add-layer ../meta-xilinx/meta-xilinx-bsp/ $ bitbake-layers add-layer ../meta-openembedded/meta-oe/ ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:1:3","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"1.4. Generate image (and take a coffee‚Ä¶) bitbake core-image-minimal Once complete the images for the target machine will be available in the output directory poky/build/tmp/deploy/images/zedboard-zynq7. ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:1:4","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"1.5 Modify the uEnv.txt file We need to modify uEnv.txt a little bit according to a Xilinx layer README-booting.md echo \"ramdisk_image=core-image-minimal-zedboard-zynq7.cpio.gz.u-boot\" \u003e\u003e tmp/deploy/images/zedboard-zynq7/uEnv.txt ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:2:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"2. Creating the SD card ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:3:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"Partitions Create two partitions on the SD card: Partition #1 : 100 MB, fat16. Partition #2 : remaining space, ext3. Copy the following files in partition #1: sudo cp boot.bin boot.scr core-image-minimal-zedboard-zynq7.cpio.gz.u-boot u-boot.img uEnv.txt uImage zynq-zed.dtb /mnt/partition1 Extract the core-image-minimal archive in partition #2: sudo cp core-image-minimal-zedboard-zynq7.tar.gz /mnt/partition2 cd /mnt/partition2 sudo tar xvzf core-image-minimal-zedboard-zynq7.tar.gz Now, everything should be OK! Poky (Yocto Project Reference Distro) 3.0.3 zedboard-zynq7 /dev/ttyPS0 zedboard-zynq7 login: root root@zedboard-zynq7:~# cat /proc/cpuinfo processor : 0 model name : ARMv7 Processor rev 0 (v7l) BogoMIPS : 666.66 Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpd32 CPU implementer : 0x41 CPU architecture: 7 CPU variant : 0x3 CPU part : 0xc09 CPU revision : 0 processor : 1 model name : ARMv7 Processor rev 0 (v7l) BogoMIPS : 666.66 Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpd32 CPU implementer : 0x41 CPU architecture: 7 CPU variant : 0x3 CPU part : 0xc09 CPU revision : 0 Hardware : Xilinx Zynq Platform Revision : 0003 ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:4:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"References https://www.youtube.com/watch?v=XPnmB-THjiY ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:5:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":["tech-embedded"],"content":"Other sources (to check later) https://blog.mbedded.ninja/programming/embedded-linux/zynq/building-linux-for-the-zynq-zc702-eval-kit-using-yocto/ https://dwjbosman.github.io/yocto-linux-on-the-xilinx-zynq-zed-board ","date":"2020-01-01","objectID":"/yocto-zedboard-101/:6:0","tags":["yocto","zedboard"],"title":"Yocto on the Zedboard 101","uri":"/yocto-zedboard-101/"},{"categories":null,"content":" Hi, I‚Äôm Pascal! I‚Äôm working at ENSTA Bretagne in the embedded systems security field. This Github website is mainly a collection of articles and tech notes. Things around security but also others things! Hope you‚Äôll find something of interest üòâ For research purposes, please visit my academic webpage: https://pascalcotret.wordpress.com/ ","date":"2019-08-02","objectID":"/about/:0:0","tags":null,"title":"About me","uri":"/about/"}]